# 🍽️ DailyMenu 每日菜单 - 详细需求规格说明书

## 📋 项目概述

**项目名称**: DailyMenu 每日菜单  
**目标平台**: Android App (Kotlin + Jetpack Compose)  
**版本**: v2.0  
**更新日期**: 2026-02-17

**核心理念**: 让做饭变得简单有趣，每天为用户智能推荐适合天气的三餐菜谱，并提供沉浸式视频+图文教学体验。

---

## 🎯 核心功能需求

### 1. 智能推荐系统（现有功能增强）

#### 1.1 天气感知推荐
- **功能描述**: 根据实时天气、温度、季节自动推荐最适合的菜谱
- **输入参数**:
  - 温度（摄氏度）
  - 天气状况（晴/多云/阴/雨/雪/雾/风）
  - 季节（春夏秋冬）
  - 地理位置（城市）
  - 时间（早/中/晚）
- **推荐算法**:
  - 高温 (>30°C): 推荐清凉、开胃、凉拌类菜品
  - 低温 (<10°C): 推荐温暖、滋补、汤锅类菜品
  - 雨天: 优先推荐汤类、炖菜、热饮
  - 晴天: 优先推荐轻食、沙拉、烧烤
  - 季节时令: 推荐当季新鲜食材制作的菜品
- **个性化权重**:
  - 用户收藏偏好
  - 历史浏览记录
  - 饮食习惯标签（清淡/重口味/素食/减脂等）

#### 1.2 每日菜单推送
- **推送时间**: 每天早上 7:00 推送当日三餐推荐
- **推送内容**:
  - 早餐: 菜名 + 预计耗时
  - 午餐: 菜名 + 预计耗时
  - 晚餐: 菜名 + 预计耗时
  - 点击推送直接进入详情页
- **智能提醒**:
  - 餐前 30 分钟提醒准备食材
  - 根据用户设置的用餐时间自动调整

---

### 2. 菜谱详情系统（核心增强）

#### 2.1 视频教学模块 ⭐ 新增

##### 2.1.1 视频播放器
- **播放器功能**:
  - 支持横竖屏切换
  - 倍速播放 (0.5x, 0.75x, 1x, 1.25x, 1.5x, 2x)
  - 画中画模式（退出应用后小窗播放）
  - 后台音频播放
  - 播放进度记忆（下次进入从上次位置继续）
  - 离线缓存（可下载视频到本地）
  
- **视频规格**:
  - 格式: MP4 (H.264)
  - 分辨率: 720p/1080p 自适应
  - 码率: 2-4 Mbps
  - 时长: 单个菜品 3-10 分钟
  - 封面: 自动截取视频第一帧或自定义封面图

##### 2.1.2 视频内容结构
```
视频章节划分：
├── 片头 (5-10秒)
│   ├── 菜名展示
│   ├── 成品图展示
│   └── 预计时间和难度
├── 食材准备 (30-60秒)
│   ├── 食材清单展示
│   ├── 食材处理过程
│   └── 工具准备
├── 烹饪步骤 (2-6分钟)
│   ├── 步骤1: xxx
│   ├── 步骤2: xxx
│   └── ...
├── 摆盘技巧 (30秒)
└── 成品展示 (15-30秒)
```

##### 2.1.3 互动功能
- **时间戳导航**: 视频下方显示章节时间轴，点击跳转到对应步骤
- **弹幕/评论**: 用户可在特定时间点发表评论和提问
- **AI 助手**: 视频播放时支持语音提问（"这一步要炒多久？"）
- **收藏片段**: 可收藏视频中的某个片段或技巧

#### 2.2 图文教程模块 ⭐ 新增

##### 2.2.1 图文内容结构
```
图文教程页面：
├── 顶部区域
│   ├── 高清成品图（支持放大查看）
│   ├── 菜名 + 简介
│   ├── 收藏/分享按钮
│   └── 难度/时间/热量标签
├── 食材区域
│   ├── 食材清单（带图）
│   ├── 食材用量（支持 servings 调整）
│   ├── 购买链接（可选）
│   └── 替换建议（"没有XX可以用YY代替"）
├── 步骤区域
│   ├── 步骤 1
│   │   ├── 步骤图/动图
│   │   ├── 文字说明
│   │   ├── 小贴士
│   │   └── 计时器（"需要翻炒3分钟"）
│   ├── 步骤 2
│   └── ...
├── 技巧区域
│   ├── 大厨秘籍
│   ├── 常见问题
│   └── 失败案例分析
└── 评论区
    ├── 用户晒图
    ├── 提问与回答
    └── 评分与标签
```

##### 2.2.2 图文交互功能
- **步骤模式切换**:
  - 卡片模式: 左右滑动查看每步
  - 列表模式: 所有步骤长列表展示
  - 沉浸式模式: 全屏大图 + 简洁文字
  
- **智能辅助**:
  - **语音朗读**: 步骤文字语音播报
  - **步骤计时器**: 每个步骤可设置倒计时
  - **手势操作**: 左滑下一步，右滑上一步
  - **收藏步骤**: 可收藏特定步骤或技巧
  
- **食材计算器**:
  - 支持 servings 调整（1人份/2人份/4人份/自定义）
  - 自动计算食材用量
  - 购物清单生成（可导出）

#### 2.3 菜谱数据模型扩展
```kotlin
// Recipe.kt 扩展示例
data class Recipe(
    // 现有字段...
    val id: Long = 0,
    val name: String,
    val description: String,
    
    // 视频相关 ⭐ 新增
    val videoUrl: String?,              // 视频地址
    val videoDuration: Int,             // 视频时长（秒）
    val videoChapters: List<VideoChapter>, // 视频章节
    val videoCached: Boolean = false,   // 是否已缓存
    
    // 图文相关 ⭐ 新增
    val stepImages: List<StepImage>,    // 步骤图片列表
    val tips: List<String>,             // 烹饪小贴士
    val difficulty: DifficultyLevel,    // 难度等级
    val servings: Int,                  // 默认份量
    val equipment: List<String>,        // 所需厨具
    
    // 社交相关 ⭐ 新增
    val rating: Float,                  // 评分（1-5星）
    val reviewCount: Int,               // 评论数量
    val authorId: String?,              // 作者ID
    val createTime: Long,               // 创建时间
    val viewCount: Int,                 // 浏览次数
    val tags: List<String>,
    val isFavorite: Boolean = false
)

data class VideoChapter(
    val title: String,      // 章节标题
    val startTime: Int,     // 开始时间（秒）
    val thumbnail: String?  // 章节缩略图
)

data class StepImage(
    val stepNumber: Int,    // 步骤编号
    val imageUrl: String,   // 图片地址
    val description: String,// 图片描述
    val tips: String?,      // 该步骤小贴士
    val duration: Int?      // 该步骤预计时间（秒）
)

enum class DifficultyLevel {
    EASY,       // 简单（新手友好）
    MEDIUM,     // 中等（需要基础）
    HARD,       // 困难（技巧要求高）
    EXPERT      // 专家（专业级）
}
```

---

### 3. 用户系统与微信登录 ⭐ 新增

#### 3.1 微信登录集成

##### 3.1.1 登录流程
```
用户登录流程：
1. 用户点击"微信登录"按钮
2. 调起微信客户端授权
3. 获取微信 OpenID 和基本信息
4. 后端验证并生成应用 Token
5. 登录成功，进入首页
```

##### 3.1.2 用户信息获取
- **基础信息**:
  - 微信 OpenID（唯一标识）
  - 昵称
  - 头像 URL
  - 性别（可选）
  - 地区（可选）
  
- **隐私授权**:
  - 用户可选择是否授权手机号
  - 用户可随时解除授权
  - 符合微信隐私协议

##### 3.1.3 登录状态管理
- **Token 机制**:
  - Access Token: 有效期 2 小时
  - Refresh Token: 有效期 30 天
  - 自动刷新机制
  
- **多设备登录**:
  - 支持手机/平板同时登录
  - 可查看已登录设备
  - 支持远程登出其他设备

#### 3.2 用户个人中心

##### 3.2.1 个人资料页
```
个人中心结构：
├── 顶部信息卡
│   ├── 头像（同步微信头像）
│   ├── 昵称（可修改）
│   ├── 会员等级/徽章
│   └── 编辑资料按钮
├── 数据统计
│   ├── 收藏菜谱数
│   ├── 已学菜品数
│   ├── 发布作品数
│   └── 累计烹饪天数
├── 功能菜单
│   ├── 我的收藏
│   ├── 浏览历史
│   ├── 我的作品（晒图）
│   ├── 下载管理（离线视频）
│   ├── 我的评价
│   ├── 消息通知
│   └── 设置
└── 成就系统
    ├── 连续打卡天数
    ├── 解锁徽章
    └── 烹饪等级
```

##### 3.2.2 用户行为数据
- **收藏体系**:
  - 收藏的菜谱
  - 收藏的视频片段
  - 收藏的烹饪技巧
  - 收藏的分类标签
  
- **学习进度**:
  - 已完成学习的菜谱
  - 学习中的菜谱（进度保存）
  - 观看历史
  - 烹饪打卡记录
  
- **社交互动**:
  - 发布的作品（晒图）
  - 发表的评论
  - 点赞记录
  - 关注的大厨/用户

#### 3.3 数据模型
```kotlin
// User.kt ⭐ 新增
data class User(
    val id: String,                     // 用户ID
    val wechatOpenId: String,           // 微信OpenID
    val nickname: String,               // 昵称
    val avatarUrl: String,              // 头像URL
    val phone: String?,                 // 手机号（可选）
    val gender: Int,                    // 性别 0-未知 1-男 2-女
    val region: String?,                // 地区
    val bio: String?,                   // 个人简介
    val birthday: Long?,                // 生日
    val dietaryPreferences: List<String>, // 饮食偏好标签
    val allergens: List<String>,        // 过敏食材
    
    // 统计数据
    val favoriteCount: Int,
    val learnedCount: Int,
    val postCount: Int,
    val streakDays: Int,                // 连续打卡天数
    val totalCookingDays: Int,          // 累计烹饪天数
    
    // 会员信息
    val memberLevel: MemberLevel,
    val memberExpireTime: Long?,        // 会员过期时间
    
    // 设置
    val settings: UserSettings,
    
    val createTime: Long,
    val lastLoginTime: Long
)

data class UserSettings(
    val pushEnabled: Boolean,           // 推送开关
    val dailyPushTime: String,          // 每日推送时间（"07:00"）
    val mealReminderEnabled: Boolean,   // 用餐提醒
    val autoCacheVideo: Boolean,        // 自动缓存视频
    val videoQuality: String,           // 视频清晰度（"auto"/"720p"/"1080p"）
    val fontSize: String                // 字体大小（"small"/"normal"/"large"）
)

enum class MemberLevel {
    FREE,       // 普通用户
    VIP,        // VIP会员
    SVIP        // 超级会员
}
```

---

### 4. 社交与互动功能 ⭐ 新增

#### 4.1 作品分享（晒图）
- **发布作品**:
  - 上传成品照片（最多9张）
  - 添加文字描述和心得
  - 关联原菜谱
  - 添加标签和话题
  - 设置可见范围（公开/仅自己/好友）
  
- **作品展示**:
  - 个人主页作品墙
  - 菜谱详情页用户作品展示
  - 发现页推荐优秀作品
  
- **互动功能**:
  - 点赞
  - 评论
  - 收藏他人作品
  - 分享到微信/朋友圈

#### 4.2 评论与问答系统
- **评论类型**:
  - 菜谱评论（针对整个菜谱）
  - 步骤提问（针对特定步骤）
  - 视频弹幕（时间点评论）
  
- **评论功能**:
  - 文字评论
  - 图片评论（晒图）
  - @其他用户
  - 评论点赞和回复
  - 评论排序（时间/热度/有用）
  
- **问答专区**:
  - 常见问题汇总
  - 用户提问
  - 作者/其他用户回答
  - 优质问答置顶

#### 4.3 大厨/创作者系统
- **认证大厨**:
  - 专业厨师认证标识
  - 专属主页展示
  - 粉丝关注系统
  
- **内容创作**:
  - 发布原创菜谱
  - 上传教学视频
  - 直播烹饪（可选）
  
- **收益体系**（可选）:
  - 打赏功能
  - 付费菜谱
  - 会员分成

---

### 5. 内容管理系统

#### 5.1 菜谱内容来源
- **官方内容**:
  - 专业团队拍摄制作
  - 营养师审核
  - 定期更新（每周10+新菜谱）
  
- **UGC 内容**:
  - 用户上传（审核后展示）
  - 用户改编版本
  - 地区特色菜谱征集

#### 5.2 内容审核
- **机器审核**:
  - 图片鉴黄
  - 文字敏感词过滤
  - 视频内容检测
  
- **人工审核**:
  - 新用户首次发布
  - 被举报内容
  - 优质内容推荐审核

#### 5.3 内容推荐算法
- **首页推荐**:
  - 基于天气的必做推荐
  - 个性化推荐（协同过滤）
  - 热门榜单（本周/本月）
  - 新品推荐
  - 猜你喜欢
  
- **搜索与筛选**:
  - 关键词搜索
  - 语音搜索
  - 多维度筛选（难度/时间/食材/菜系/场合）
  - 智能联想和纠错

---

### 6. 会员与增值服务（可选）

#### 6.1 免费功能
- 每日三餐推荐
- 基础图文教程
- 收藏和浏览历史
- 基础社交功能

#### 6.2 VIP 会员权益
- **内容权益**:
  - 全站视频无限观看
  - 1080p 高清视频
  - 视频离线下载
  - 优先观看新菜谱
  
- **功能权益**:
  - 高级搜索筛选
  - 专属客服
  - 去广告
  - 云同步（跨设备数据同步）
  
- **社交权益**:
  - 专属会员标识
  - 作品优先推荐
  - 专属活动参与权

#### 6.3 会员定价（参考）
- 月度会员: ¥18/月
- 季度会员: ¥45/季（8.3折）
- 年度会员: ¥168/年（7.8折）
- 连续包月: ¥15/月

---

## 📱 页面结构

### 主要页面清单

```
应用页面结构：
├── 启动页 (SplashScreen)
│   └── 品牌展示 + 加载数据
├── 引导页 (OnboardingScreen) [首次启动]
│   └── 功能介绍 + 权限申请
├── 登录页 (LoginScreen)
│   └── 微信登录 + 游客模式
├── 首页 (HomeScreen) [主页面]
│   ├── 天气卡片
│   ├── 今日推荐（三餐卡片）
│   └── 快捷操作栏
├── 菜谱详情页 (RecipeDetailScreen)
│   ├── 视频播放器
│   ├── 图文教程
│   ├── 食材清单
│   ├── 步骤详解
│   ├── 小贴士
│   └── 评论区
├── 发现页 (DiscoverScreen)
│   ├── 搜索栏
│   ├── 分类标签
│   ├── 热门榜单
│   ├── 推荐内容
│   └── 话题广场
├── 收藏页 (FavoritesScreen)
│   ├── 收藏的菜谱
│   ├── 收藏的视频
│   └── 创建的食谱清单
├── 作品页 (WorksScreen)
│   ├── 发布作品
│   ├── 我的作品
│   └── 浏览他人作品
├── 消息页 (MessageScreen)
│   ├── 系统通知
│   ├── 评论回复
│   ├── 点赞通知
│   └── 私信（可选）
├── 个人中心 (ProfileScreen)
│   ├── 个人信息
│   ├── 数据统计
│   ├── 功能菜单
│   └── 设置
└── 设置页 (SettingsScreen)
    ├── 账号管理
    ├── 通知设置
    ├── 播放设置
    ├── 隐私设置
    ├── 关于我们
    └── 退出登录
```

---

## 🛠️ 技术架构

### 前端（Android）
```
技术栈：
├── 语言: Kotlin
├── UI框架: Jetpack Compose
├── 架构: MVVM + Clean Architecture
├── 依赖注入: Hilt
├── 网络: Retrofit + OkHttp + Kotlin Serialization
├── 数据库: Room
├── 图片加载: Coil
├── 视频播放: ExoPlayer
├── 本地存储: DataStore + MMKV
├── 后台任务: WorkManager
├── 推送: Firebase Cloud Messaging (FCM)
└── 微信SDK: 微信开放平台 Android SDK
```

### 后端（建议）
```
技术栈：
├── 语言: Node.js / Go / Java
├── 框架: Express / Gin / Spring Boot
├── 数据库: 
│   ├── MySQL（业务数据）
│   ├── Redis（缓存、会话）
│   └── MongoDB（日志、非结构化数据）
├── 对象存储: 阿里云OSS / 腾讯云COS（图片、视频）
├── CDN: 阿里云CDN / 腾讯云CDN（内容分发）
├── 视频处理: 阿里云视频点播 / 腾讯云视频处理
├── 消息队列: RabbitMQ / Kafka（异步任务）
├── 搜索引擎: Elasticsearch（菜谱搜索）
└── 推送服务: 极光推送 / 友盟推送
```

### 第三方服务
```
必需服务：
├── 微信开放平台
│   ├── 移动应用接入（微信登录、分享）
│   └── 需要资质：企业营业执照
├── 天气服务
│   └── 和风天气 / 心知天气 API
├── 对象存储
│   └── 阿里云OSS / 腾讯云COS / 七牛云
└── CDN加速
    └── 阿里云CDN / 腾讯云CDN

可选服务：
├── 推送服务
│   └── 极光推送 / Firebase Cloud Messaging
├── 数据分析
│   └── 友盟+ / Firebase Analytics
├── 崩溃监控
│   └── Firebase Crashlytics / Bugly
└── APM性能监控
    └── 听云 / OneAPM
```

---

## 📊 数据流图

### 2.1 菜谱详情加载流程
```
用户点击菜谱卡片
       ↓
[本地缓存检查]
       ↓
   存在? ──→ 直接显示本地数据
       ↓ 否
[请求API获取详情]
       ↓
[解析数据：基本信息+视频+图文]
       ↓
[保存到本地缓存]
       ↓
[渲染页面：视频区+图文区]
       ↓
[预加载视频首帧]
       ↓
[页面展示完成]
```

### 2.2 微信登录流程
```
用户点击"微信登录"
       ↓
[检查是否安装微信]
       ↓
未安装 ──→ 提示"请先安装微信"
       ↓
[调起微信授权页面]
       ↓
用户授权/取消
       ↓
授权 ──→ 获取临时code
       ↓
[发送code到后端]
       ↓
[后端换取access_token和openid]
       ↓
[后端查询/创建用户]
       ↓
[后端生成应用token]
       ↓
[返回token给客户端]
       ↓
[保存token到本地]
       ↓
[登录成功，进入首页]
```

### 2.3 视频播放流程
```
用户点击播放按钮
       ↓
[检查本地缓存]
       ↓
已缓存 ──→ 直接播放本地文件
       ↓ 未缓存
[检查网络状态]
       ↓
WiFi ──→ 直接播放在线视频
移动数据 ──→ 提示"正在使用移动数据"
       ↓
[开始缓冲]
       ↓
[显示首帧画面]
       ↓
[开始播放]
       ↓
[后台缓存视频到本地]（可选）
       ↓
[播放进度同步到服务器]（记录学习进度）
```

---

## 🎨 UI/UX 设计规范

### 色彩系统
```
主色调：
├── 主色: #FF6B35 (橙色) - 强调色、按钮、标签
├── 主色浅: #FF8A5C (浅橙) - 悬浮态、背景
├── 主色深: #E55A2B (深橙) - 点击态
├── 辅助色: #4CAF50 (绿色) - 成功、健康
└── 强调色: #FFC107 (黄色) - 提示、收藏

中性色：
├── 背景色: #FFF9F5 (米白) - 页面背景
├── 卡片色: #FFFFFF (白色) - 卡片、浮层
├── 分割线: #F0E6E0 (浅灰) - 分隔线
├── 文字主色: #2D2A26 (深灰) - 标题
├── 文字次色: #6B6560 (中灰) - 正文
└── 文字辅助: #9B9590 (浅灰) - 提示文字

功能色：
├── 成功: #4CAF50
├── 警告: #FFC107
├── 错误: #F44336
└── 信息: #2196F3
```

### 字体规范
```
字体家族：
├── 中文: PingFang SC / Noto Sans SC
├── 英文: SF Pro Display / Roboto
└── 数字: DIN Alternate / Roboto Mono

字号规范：
├── 大标题: 24sp / Bold
├── 标题: 20sp / SemiBold
├── 小标题: 18sp / Medium
├── 正文: 16sp / Regular
├── 辅助文字: 14sp / Regular
├── 标签: 12sp / Medium
└── 注释: 11sp / Regular
```

### 组件规范
```
按钮：
├── 主按钮: 高度48dp, 圆角12dp, 主色背景
├── 次按钮: 高度48dp, 圆角12dp, 描边样式
├── 文字按钮: 高度40dp, 主色文字
└── 图标按钮: 48dp x 48dp, 圆形

卡片：
├── 大卡片: 圆角16dp, 阴影4dp
├── 中卡片: 圆角12dp, 阴影2dp
└── 小卡片: 圆角8dp, 无阴影

输入框：
├── 高度: 48dp
├── 圆角: 8dp
└── 边框: 1dp, 聚焦时主色

间距：
├── 页面边距: 16dp
├── 卡片内边距: 16dp
├── 元素间距: 8dp / 12dp / 16dp / 24dp
└── 分区间距: 24dp / 32dp
```

### 动画规范
```
转场动画：
├── 页面进入: 从右向左滑入, 300ms, ease-out
├── 页面退出: 从左向右滑出, 250ms, ease-in
├── 模态弹窗: 从底部滑入, 250ms, ease-out
└── 返回手势: 边缘拖拽, 实时跟随

交互动画：
├── 按钮点击: 缩放0.95, 100ms
├── 卡片点击: 背景变暗, 150ms
├── 收藏动画: 心跳缩放, 400ms
└── 加载动画: 旋转进度条, 循环

列表动画：
├── 列表加载: 淡入 + 向上滑动,  staggered 50ms
├── 删除项: 向左滑出 + 高度收缩, 300ms
└── 添加项: 淡入 + 向上滑动, 200ms
```

---

## 🔒 安全与隐私

### 1. 数据安全
- **传输加密**: 全站 HTTPS，证书固定
- **存储加密**: 敏感数据加密存储（KeyStore）
- **Token 安全**: JWT + Refresh Token 机制
- **防重放攻击**: 请求时间戳 + nonce 校验
- **API 限流**: 防止恶意请求

### 2. 隐私保护
- **最小化收集**: 只收集必要信息
- **授权明示**: 敏感权限（位置、相机、相册）需用户授权
- **隐私政策**: 清晰的隐私政策说明
- **数据删除**: 用户可请求删除账号和数据
- **未成年人保护**: 符合相关法规要求

### 3. 合规要求
- **微信开放平台**: 遵守微信开发者协议
- **个人信息保护法**: 符合国内隐私法规
- **数据安全法**: 数据分类分级保护
- **网络安全法**: 日志留存和审计

---

## 📈 性能指标

### 1. 启动性能
- **冷启动时间**: < 2秒（低端机 < 3秒）
- **首屏渲染**: < 1秒
- **白屏时间**: < 500ms

### 2. 页面性能
- **页面加载**: < 1秒（有缓存 < 500ms）
- **图片加载**: 首屏图片 < 1秒
- **视频首帧**: < 2秒
- **列表滑动**: 60fps

### 3. 包体积
- **APK 大小**: < 50MB
- **安装包**: 经过资源压缩和代码混淆
- **视频缓存**: 用户可设置最大缓存空间

### 4. 网络优化
- **数据压缩**: Gzip / Brotli
- **图片优化**: WebP 格式，渐进加载
- **视频自适应**: 根据网络切换清晰度
- **请求合并**: 减少网络请求次数
- **预加载**: 智能预加载可能查看的内容

---

## 🚀 开发计划

### 第一阶段：MVP（4周）
**目标**: 完成核心功能，可演示版本
- [ ] 项目搭建和架构设计
- [ ] 微信登录集成
- [ ] 基础菜谱展示（现有功能）
- [ ] 图文教程页面（静态图片+文字）
- [ ] 用户个人中心基础版
- [ ] 收藏功能

### 第二阶段：核心增强（4周）
**目标**: 添加视频和社交功能
- [ ] 视频播放器集成
- [ ] 视频上传和管理（后端）
- [ ] 图文教程增强（步骤计时器、食材计算）
- [ ] 评论系统
- [ ] 作品分享功能
- [ ] 消息通知系统

### 第三阶段：智能化（3周）
**目标**: 个性化和推荐优化
- [ ] 用户画像系统
- [ ] 个性化推荐算法
- [ ] 搜索功能优化
- [ ] 学习进度追踪
- [ ] 成就系统

### 第四阶段： polish（2周）
**目标**: 优化和上线准备
- [ ] 性能优化
- [ ] UI 细节打磨
- [ ] Bug 修复
- [ ] 测试和验收
- [ ] 应用商店准备

---

## 📝 API 接口设计（概要）

### 用户相关
```
POST   /api/v1/auth/wechat-login    # 微信登录
POST   /api/v1/auth/refresh         # 刷新Token
DELETE /api/v1/auth/logout          # 退出登录
GET    /api/v1/user/profile         # 获取用户信息
PUT    /api/v1/user/profile         # 更新用户信息
GET    /api/v1/user/stats           # 获取用户统计
```

### 菜谱相关
```
GET    /api/v1/recipes/daily        # 获取每日推荐
GET    /api/v1/recipes/{id}         # 获取菜谱详情
GET    /api/v1/recipes/search       # 搜索菜谱
GET    /api/v1/recipes/category     # 按分类获取
GET    /api/v1/recipes/hot          # 热门菜谱
POST   /api/v1/recipes/{id}/view    # 记录浏览
POST   /api/v1/recipes/{id}/favorite # 收藏/取消收藏
```

### 视频相关
```
GET    /api/v1/videos/{id}/url      # 获取视频播放地址
POST   /api/v1/videos/{id}/progress # 上报播放进度
GET    /api/v1/videos/{id}/chapters # 获取视频章节
```

### 社交相关
```
GET    /api/v1/comments/{recipeId}  # 获取评论列表
POST   /api/v1/comments             # 发表评论
POST   /api/v1/comments/{id}/like   # 点赞评论
GET    /api/v1/works                # 获取作品列表
POST   /api/v1/works                # 发布作品
POST   /api/v1/works/{id}/like      # 点赞作品
```

### 收藏相关
```
GET    /api/v1/favorites            # 获取收藏列表
POST   /api/v1/favorites            # 添加收藏
DELETE /api/v1/favorites/{id}       # 取消收藏
```

---

## 🧪 测试计划

### 1. 功能测试
- **单元测试**: 核心逻辑、工具类（覆盖率 > 70%）
- **集成测试**: API 接口、数据库操作
- **UI 测试**: 关键流程自动化测试

### 2. 兼容性测试
- **机型覆盖**: 主流品牌（华为、小米、OPPO、vivo、三星）
- **系统版本**: Android 8.0 - 14.0
- **屏幕尺寸**: 从 5 寸到折叠屏
- **特殊场景**: 横竖屏切换、分屏模式

### 3. 性能测试
- **启动时间测试**
- **内存占用测试**
- **电量消耗测试**
- **网络流量测试**
- **视频播放性能测试**

### 4. 安全测试
- **数据加密验证**
- **权限申请合规性**
- **API 安全性测试**
- **防逆向工程测试**

---

## 📋 验收标准

### 功能验收
- [ ] 微信登录流程顺畅，无卡顿
- [ ] 视频播放流畅，支持倍速和手势
- [ ] 图文教程清晰，步骤可追踪
- [ ] 收藏功能正常，数据同步正确
- [ ] 每日推荐算法合理，推荐结果满意
- [ ] 社交功能可用，互动顺畅

### 性能验收
- [ ] 冷启动 < 2秒
- [ ] 页面切换无卡顿
- [ ] 视频播放无缓冲卡顿
- [ ] 列表滑动 60fps
- [ ] 内存占用合理（< 200MB）

### 用户体验验收
- [ ] UI 符合设计规范
- [ ] 动画流畅自然
- [ ] 错误提示清晰友好
- [ ] 空状态处理完善
- [ ] 离线功能可用

---

## 📚 附录

### A. 参考应用
- **下厨房**: 菜谱社区，UGC内容丰富
- **懒饭**: 短视频教学，界面简洁
- **豆果美食**: 老牌菜谱应用，功能全面
- **Tasty**: 国际短视频美食应用

### B. 设计资源
- **图标**: Material Design Icons / Feather Icons
- **插画**: 自定义美食主题插画
- **动效**: Lottie 动画

### C. 技术文档
- [微信开放平台文档](https://developers.weixin.qq.com/doc/oplatform/Mobile_App/Access_Guide/Android.html)
- [ExoPlayer 文档](https://exoplayer.dev/)
- [Jetpack Compose 文档](https://developer.android.com/jetpack/compose)

---

**文档版本**: v1.0  
**编写日期**: 2026-02-17  
**下次评审**: 开发启动前

---

> 💡 **提示**: 这是一份详细的需求规格说明书，可作为开发、设计和测试的参考依据。实际开发中可根据资源和时间进行优先级调整。
